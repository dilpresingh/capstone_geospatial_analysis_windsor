---
title: "Final Year Project"
author: "Shubhankar Sudhir Vaidya"
date: '2022-06-03'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

```{r}
library(dplyr)
library(tidygeocoder)
library(sf)
library(tidyverse)
library(ggplot2)
library(tmap)
library(ggmap)
library(terra)      # classes and functions for raster data
library(spData)        # load geographic data
library(spDataLarge)   # load larger geographic data
```


```{r}
library(dplyr)
library(tidygeocoder)

eda1 <- read.csv(file = 'C:/Users/Shubhankar/Desktop/4th sem/DAB 402/AllServiceRequests_YTD.csv')

class(eda1)
summary(eda1)

eda_fin=as_tibble(eda1)

Final_data <- eda1 %>% 
  geocode(Street,lat=latitude,long=longitude)

write.csv(lat_long11,"C:/Users/Shubhankar/Desktop/4th sem/DAB 402/Final_data.csv", row.names = FALSE)
```


```{r}
Final_data <- read.csv(file = 'C:/Users/Shubhankar/Desktop/4th sem/DAB 402/Final_data.csv')
```


```{r}
head(Final_data)
```


```{r}
# Space for EDA
```


```{r}
#Space for EDA
```


```{r}
#Space for EDA
```


```{r}
#Space for EDA
```


```{r}

ward_boundaries <- st_read("C:/Users/Shubhankar/Desktop/4th sem/DAB 402/Ward_boundaries/Municipal Ward Boundaries_UTM83/Municipal Ward Boundaries_UTM83.shp")
ward_boundaries


```


```{r}
st_crs(ward_boundaries)
#Finding out crs to enter while converting file into sf object
```



```{r}
# Cleaning the data
Final_data=Final_data[rowSums(is.na(Final_data)) == 0,]
```


```{r}
# Checking the clean file
summary(Final_data)
```

```{r}
the_crs <- crs(ward_boundaries, asText = TRUE)
# Convert the data frame to an sf object
Final_data_sf <- st_as_sf(Final_data, coords = c("longitude","latitude"), crs = the_crs)


```


```{r}
Final_data_sf
```



```{r}
tm_shape(ward_boundaries)+
  tm_fill()+
  tm_borders()+
  tmap_style("natural")+
  tm_shape(Final_data_sf)+
  tm_dots(size=0.3)
```


```{r}
plot(st_geometry(Final_data_sf))
```


```{r}

#trees_crs <- st_transform(trees, crs = the_crs)

```












































